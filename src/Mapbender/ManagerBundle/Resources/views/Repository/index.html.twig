{% extends "MapbenderManagerBundle::manager.html.twig" %}

{% block title %}{{ 'mb.manager.admin.sources' | trans }}{% endblock %}

{% block css %}
  {{parent()}}
{% endblock %}

{% block js %}
  {{parent()}}
  <script type="text/javascript" src="{{ asset('bundles/mapbendermanager/js/service-list.js') }}"></script>
{% endblock %}

{% block manager_content %}
{% if create_permission %}
<a class="iconAdd iconBig right" href="{{ path("mapbender_manager_repository_new") }}" title="{{ 'mb.manager.admin.source.add' | trans }}"></a>
{% endif %}
{% if sources|length > 0 %}


        <table id="-fn-sources-table" class="table">
            <caption>List of sources</caption>
            <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Type</th>
                <th scope="col">Valid</th>
                <th scope="col">description</th>
                <th scope="col">Details</th>
                <th scope="col">Actions</th>

            </tr>
            </thead>

            <tbody>
            {% for source in sources %}
               <tr>
                   <td>{{ source.id }}</td>
                   <td>{{ source.type }}</td>
                   <td> {% if source.valid == true %}
                           <span class="iconStarO icon" title="{{"mb.manager.admin.source.valid"|trans}}"></span><br>
                       {% elseif source.valid is not null %}
                           <span class="iconWarningSmpl icon" title="{{"mb.manager.admin.source.notvalid"|trans}}"></span><br>
                       {% endif %}
                   </td>


            <td>{{ source.description }}</td>

            <td><a href="{{ path("mapbender_manager_repository_view",{"sourceId":source.id}) }}" class="title">{{ source.title }}<span class="smallerText"> {{ source.alias }}</span></a></td>
            <td><div class="buttonGroup">
                    <a class="iconView hover-highlight-effect" href="{{ path("mapbender_manager_repository_view",{"sourceId":source.id}) }}" title="{{ 'mb.manager.admin.source.show_metadata' | trans }}"></a>
                    {% if is_granted('EDIT', oid) or is_granted('EDIT', source) %}
                        <a class="iconReset hover-highlight-effect" href="{{ path("mapbender_manager_repository_updateform",{"sourceId":source.id}) }}" title="{{ 'mb.manager.admin.source.update' | trans }} {{ source.title }}"></a>
                    {% endif %}
                    {% if is_granted('DELETE', oid) or is_granted('DELETE', source) %}
                        <span class="iconRemove hover-highlight-effect"
                              title="{{"mb.manager.admin.source.delete"|trans}} {{ source.title }}"
                              data-url="{{ path("mapbender_manager_repository_confirmdelete",{"sourceId":source.id}) }}"
                              data-id="{{ source.id }}"></span>
                    {% endif %}
                </div>

</tr>

                {% else %}
                    <li class="description">{{ 'mb.manager.admin.source.no_source' | trans }}</li>
                {% endfor %}
            </td>
        </tbody>
        </table>







{% endif %}
{% endblock %}
